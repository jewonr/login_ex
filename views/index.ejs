<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link rel="stylesheet" href="index.css" type="text/css">
    <title>Document</title>
</head>
<body>
    <%-include('header.ejs') %>
    <div class="section_wrapper">   
        <div class="title_wrapper">
            <div id="dec">내가 버린 쓰레기의 양은</div>
            <div id="title">000 kg</div>
        </div>
        <div class="title_wrapper">
            <div id="dec">내가 쓴 돈은</div>
            <div id="title">000 ₩</div>
        </div>
        <div class="title_wrapper">
            <div id="dec">넓어진 쓰레기 섬의 면적</div>
            <div id="title">000 km²</div>
        </div>
    </div>
    <h1>Hi <%= name %></h1>
    <form action="/logout?_method=DELETE" method="POST">
        <button type="submit">Log Out</button>
    </form>
    <div class="wave" id="wave1"></div>
    <div class="wave" id="wave2"></div>
    <div class="wave" id="wave3"></div>
    <div class="wave" id="wave4"></div>
    <div class="wave" id="wave5"></div>
    <div class="section">
        <!-- <% contents.forEach(content => { %> 
            <% if(userId === content.creater) { %> 
                <div id="<%= content._id %>">
                    <a href="/<%= content._id %>"><%= content.title %></a>
                    <button><a href="/edit/<%= content._id %>">수정</a></button>
                    <button class="deleteButton">삭제</button>
                </div>
            <% } else { %> 
                <div id="<%= content._id %>">
                    <a href="/<%= content._id %>"><%= content.title %></a>
                </div>
            <% } %> 
        <% }) %> 
        <button><a href="/create">글 작성</a></button> -->
    </div>
    <div class="section"></div>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        let deleteButton = document.querySelectorAll('.deleteButton');
        deleteButton.forEach(btn => {
            let id = btn.parentElement.id;
            btn.addEventListener('click', async () => {
                window.location.href=window.location.href
                await axios.delete(`/delete/${id}`, {
                    headers: {
                        'Content-Type': "application/json",
                    }
                });
            });
        });
    </script>
</body>
</html>